(function($){	$(function() {		//定位城市		var currentCity = '';		(new BMap.LocalCity()).get(function(result){			currentCity = result.name || '南京';		});		//点击搜索框进行搜索		$('#search').on('click',function() {			if ($('#guider').css('visibility') == 'visible') {				$('#guider').css('visibility','hidden');			}			var addressLeft = (parseInt($('.top').width()) - parseInt($('#address').width()))/2;			$('#address')				.css({position:'absolute',top: $(this).position().top,left: addressLeft})				.animate({top: '0px',left: '0px'},'slow',function() {					$('#result').removeClass('hidden');					$('#bd-map').removeClass('hidden');					//加载地图					$('#bd-map').removeClass('hidden');					var map = new BMap.Map("bd-map");					map.centerAndZoom(currentCity, 15);					//设置result的高度与地图一致					$('#result').css({height:$('#bd-map').height()});					//获取用户输入的地址					var searchAddress = $('#searchKeywords').val();					//创建解析器					var myGeo = new BMap.Geocoder();					(function(add) {						function geocodeSearch(add) {				    		myGeo.getPoint(add, function(point) {				    			if (point) {				    				var address = new BMap.Point(point.lng, point.lat);				    				addMarker(address,new BMap.Label(add,{offset:new BMap.Size(20,-10)}));				    			}				    		}, currentCity);				    	}				    	// 编写自定义函数,创建标注				    	function addMarker(point,label){				    		var marker = new BMap.Marker(point);				    		map.addOverlay(marker);				    		marker.setLabel(label);				    	}				    	geocodeSearch(add);					})(searchAddress);				});		});		//点击搜索框的相关事件		$('#searchKeywords').on('focus',function(){			$('#guider .bg').addClass('search');		});		//绑定百度搜索提示		var ac = new BMap.Autocomplete({			'input':'searchKeywords',			'location':currentCity		});																																									})})(jQuery);